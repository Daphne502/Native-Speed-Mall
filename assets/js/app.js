let CONFIG=Object.freeze({SPRING_FESTIVAL:new Date("2026-02-17T00:00:00+08:00"),CAROUSEL:{INTERVAL:4e3,TRANSITION:500,AUTO_PLAY:!0},BACK_TO_TOP:{THRESHOLD:300},PERFORMANCE:{DEBOUNCE_DELAY:100,THROTTLE_DELAY:16}}),Utils={debounce(t,s){let e=null;return(...i)=>{clearTimeout(e),e=setTimeout(()=>t.apply(this,i),s)}},throttle(t,s){let e=0;return(...i)=>{let n=Date.now();n-e>=s&&(e=n,t.apply(this,i))}},padZero:t=>String(t).padStart(2,"0"),$:t=>document.querySelector(t),$$:t=>document.querySelectorAll(t)};class CountdownTimer{constructor(t,s){this.targetDate=t,this.elements=s,this.intervalId=null,this.isRunning=!1}calculateTimeLeft(){let t=new Date,s=this.targetDate.getTime()-t.getTime();return s<=0?{days:0,hours:0,minutes:0,seconds:0,isExpired:!0}:{days:Math.floor(s/864e5),hours:Math.floor(s%864e5/36e5),minutes:Math.floor(s%36e5/6e4),seconds:Math.floor(s%6e4/1e3),isExpired:!1}}updateDisplay(t){let{days:s,hours:e,minutes:i,seconds:n}=t,{daysEl:o,hoursEl:r,minutesEl:a,secondsEl:l}=this.elements;requestAnimationFrame(()=>{o&&(o.textContent=Utils.padZero(s),o.setAttribute("datetime",`P${s}D`)),r&&(r.textContent=Utils.padZero(e),r.setAttribute("datetime",`PT${e}H`)),a&&(a.textContent=Utils.padZero(i),a.setAttribute("datetime",`PT${i}M`)),l&&(l.textContent=Utils.padZero(n),l.setAttribute("datetime",`PT${n}S`))})}handleExpired(){this.stop(),console.log("\uD83C\uDF89 æ˜¥èŠ‚åˆ°å•¦ï¼æ–°æ˜¥å¿«ä¹ï¼");let t=Utils.$(".countdown-section");if(t){let s=t.querySelector(".countdown-wrapper");s&&(s.innerHTML=`
                    <div class="countdown-header">
                        <span class="countdown-icon" aria-hidden="true">ğŸ†</span>
                        <h2 class="countdown-title">ğŸ§§ æ–°æ˜¥å¿«ä¹ ğŸ§§</h2>
                        <span class="countdown-icon" aria-hidden="true">ğŸ†</span>
                    </div>
                    <p class="countdown-date" style="font-size: 1.25rem; margin-top: 1rem;">
                        æ­å–œå‘è´¢ï¼Œä¸‡äº‹å¦‚æ„ï¼
                    </p>
                `)}}tick(){let t=this.calculateTimeLeft();if(t.isExpired){this.handleExpired();return}this.updateDisplay(t)}start(){this.isRunning||(this.isRunning=!0,this.tick(),this.intervalId=setInterval(()=>{this.tick()},1e3),console.log("â±ï¸ å€’è®¡æ—¶å·²å¯åŠ¨"))}stop(){this.intervalId&&(clearInterval(this.intervalId),this.intervalId=null),this.isRunning=!1,console.log("â±ï¸ å€’è®¡æ—¶å·²åœæ­¢")}destroy(){this.stop(),this.elements=null,console.log("â±ï¸ å€’è®¡æ—¶å·²é”€æ¯")}}class Carousel{constructor(t,s={}){this.container=t,this.options={...CONFIG.CAROUSEL,...s},this.slides=t.querySelectorAll(".banner-slide"),this.indicators=t.querySelectorAll(".indicator"),this.currentIndex=0,this.intervalId=null,this.isPlaying=this.options.AUTO_PLAY,this.init()}init(){0!==this.slides.length&&(this.bindEvents(),this.isPlaying&&this.start())}bindEvents(){this.indicators.forEach((t,s)=>{t.addEventListener("click",()=>{this.goTo(s),this.resetTimer()})});let t=0,s=0;this.container.addEventListener("touchstart",s=>{t=s.touches[0].clientX,this.pause()},{passive:!0}),this.container.addEventListener("touchend",e=>{s=e.changedTouches[0].clientX;let i=t-s;Math.abs(i)>50&&(i>0?this.next():this.prev()),this.start()},{passive:!0}),document.addEventListener("visibilitychange",()=>{document.hidden?this.pause():this.isPlaying&&this.start()})}goTo(t){t<0?t=this.slides.length-1:t>=this.slides.length&&(t=0),this.slides[this.currentIndex].classList.remove("active"),this.slides[t].classList.add("active"),this.indicators[this.currentIndex].classList.remove("active"),this.indicators[this.currentIndex].setAttribute("aria-selected","false"),this.indicators[t].classList.add("active"),this.indicators[t].setAttribute("aria-selected","true"),this.currentIndex=t}next(){this.goTo(this.currentIndex+1)}prev(){this.goTo(this.currentIndex-1)}start(){this.intervalId||(this.intervalId=setInterval(()=>{this.next()},this.options.INTERVAL))}pause(){this.intervalId&&(clearInterval(this.intervalId),this.intervalId=null)}resetTimer(){this.pause(),this.isPlaying&&this.start()}destroy(){this.pause(),this.slides=null,this.indicators=null}}class BackToTop{constructor(t,s={}){this.button=t,this.options={...CONFIG.BACK_TO_TOP,...s},this.init()}init(){this.button&&(this.bindEvents(),this.checkVisibility())}bindEvents(){this.button.addEventListener("click",()=>{this.scrollToTop()});let t=Utils.throttle(()=>{this.checkVisibility()},CONFIG.PERFORMANCE.THROTTLE_DELAY);window.addEventListener("scroll",t,{passive:!0})}checkVisibility(){let t=window.scrollY||window.pageYOffset;t>this.options.THRESHOLD?this.show():this.hide()}show(){this.button.classList.add("visible"),this.button.removeAttribute("hidden")}hide(){this.button.classList.remove("visible")}scrollToTop(){window.scrollTo({top:0,behavior:"smooth"})}}class ProductInteraction{constructor(){this.init()}init(){this.bindEvents()}bindEvents(){document.addEventListener("click",t=>{t.target.classList.contains("product-btn")&&this.handleBuyClick(t)})}handleBuyClick(t){let s=t.target,e=s.closest(".product-card"),i=e?.querySelector(".product-name")?.textContent||"å•†å“";s.style.transform="scale(0.95)",setTimeout(()=>{s.style.transform=""},150),console.log(`ğŸ›’ æ·»åŠ åˆ°è´­ç‰©è½¦: ${i}`),this.showToast(`å·²æ·»åŠ  "${i}" åˆ°è´­ç‰©è½¦`)}showToast(t){let s=document.createElement("div");if(s.className="toast",s.textContent=t,s.style.cssText=`
            position: fixed;
            bottom: 100px;
            left: 50%;
            transform: translateX(-50%);
            background: rgba(0, 0, 0, 0.8);
            color: white;
            padding: 12px 24px;
            border-radius: 24px;
            font-size: 14px;
            z-index: 1000;
            animation: toastIn 0.3s ease;
        `,!document.querySelector("#toast-styles")){let e=document.createElement("style");e.id="toast-styles",e.textContent=`
                @keyframes toastIn {
                    from { opacity: 0; transform: translateX(-50%) translateY(20px); }
                    to { opacity: 1; transform: translateX(-50%) translateY(0); }
                }
                @keyframes toastOut {
                    from { opacity: 1; transform: translateX(-50%) translateY(0); }
                    to { opacity: 0; transform: translateX(-50%) translateY(-20px); }
                }
            `,document.head.appendChild(e)}document.body.appendChild(s),setTimeout(()=>{s.style.animation="toastOut 0.3s ease forwards",setTimeout(()=>s.remove(),300)},2e3)}}class App{constructor(){this.countdown=null,this.carousel=null,this.backToTop=null,this.productInteraction=null}init(){"loading"===document.readyState?document.addEventListener("DOMContentLoaded",()=>this.setup()):this.setup()}setup(){console.log("\uD83E\uDDE7 å¹´è´§èŠ‚å•é¡µåº”ç”¨åˆå§‹åŒ–ä¸­..."),this.initCountdown(),this.initCarousel(),this.initBackToTop(),this.initProductInteraction(),this.initAccessibility(),console.log("âœ… åº”ç”¨åˆå§‹åŒ–å®Œæˆ")}initCountdown(){let t={daysEl:Utils.$("#countdown-days"),hoursEl:Utils.$("#countdown-hours"),minutesEl:Utils.$("#countdown-minutes"),secondsEl:Utils.$("#countdown-seconds")};if(Object.values(t).some(t=>null===t)){console.warn("âš ï¸ å€’è®¡æ—¶å…ƒç´ æœªæ‰¾åˆ°");return}this.countdown=new CountdownTimer(CONFIG.SPRING_FESTIVAL,t),this.countdown.start()}initCarousel(){let t=Utils.$(".hero-banner");if(!t){console.warn("âš ï¸ è½®æ’­å®¹å™¨æœªæ‰¾åˆ°");return}this.carousel=new Carousel(t)}initBackToTop(){let t=Utils.$("#back-to-top");if(!t){console.warn("âš ï¸ è¿”å›é¡¶éƒ¨æŒ‰é’®æœªæ‰¾åˆ°");return}this.backToTop=new BackToTop(t)}initProductInteraction(){this.productInteraction=new ProductInteraction}initAccessibility(){document.addEventListener("keydown",t=>{"Escape"===t.key&&window.scrollTo({top:0,behavior:"smooth"})});let t=Utils.$$("button, a, [tabindex]");t.forEach(t=>{t.addEventListener("focus",()=>{t.classList.add("focused")}),t.addEventListener("blur",()=>{t.classList.remove("focused")})})}destroy(){this.countdown&&this.countdown.destroy(),this.carousel&&this.carousel.destroy(),console.log("\uD83E\uDDE7 åº”ç”¨å·²é”€æ¯")}}let app=new App;app.init();export{App,CountdownTimer,Carousel,BackToTop,Utils,CONFIG};